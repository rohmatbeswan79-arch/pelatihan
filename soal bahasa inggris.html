<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Teks Rompang - Listening</title>
  <style>
    :root{
      --blue-dark: #0a4a7a; /* layer laptop */
      --blue-light: #cfeeff; /* skin soal */
    }
    html,body{height:100%;margin:0;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial;}
    body{background:var(--blue-dark);display:flex;align-items:center;justify-content:center;padding:20px;color:#04283f}
    .card{width:100%;max-width:880px;background:var(--blue-light);border-radius:12px;padding:20px;box-shadow:0 8px 20px rgba(0,0,0,0.25)}
    h1{margin:0 0 8px 0;font-size:20px}
    p.lead{margin:0 0 12px 0;color:#033354}
    .audio-wrap{padding:12px;background:rgba(255,255,255,0.85);border-radius:8px;margin-bottom:12px}
    .soal{background:rgba(255,255,255,0.9);padding:14px;border-radius:8px;margin-bottom:12px}
    label{display:block;font-weight:700;margin-bottom:6px}
    textarea{width:100%;min-height:48px;border-radius:6px;border:1px solid rgba(0,0,0,0.12);padding:10px;resize:none;background:#ffffff}
    .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
    .controls{display:flex;gap:8px;margin-top:12px}
    button{background:var(--blue-dark);color:white;border:none;padding:10px 14px;border-radius:8px;cursor:pointer;font-weight:700}
    button.secondary{background:transparent;color:#04283f;border:2px solid rgba(4,40,63,0.12)}
    .feedback{margin-top:12px;font-weight:800;min-height:28px}
    .note{font-size:13px;color:#043a57;margin-top:8px}
    @media (max-width:700px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <main class="card" role="main">
    <h1>Teks Rompang (Listening)</h1>
    <p class="lead">Silakan putar rekaman terlebih dahulu, lalu isi bagian yang kosong (1â€“6).</p>

    <div class="audio-wrap">
      <audio id="player" controls preload="none">
        <source src="https://rohmatbeswan79-arch.github.io/pelatihan/translate_tts%20(2).mp3" type="audio/mpeg">
        Browser Anda tidak mendukung pemutar audio.
      </audio>
      <div class="note">Harap peserta didik <strong>memutar</strong> rekaman sebelum mengisi jawaban.</div>
    </div>

    <div class="soal">
      <p>My name is Rohmat, and I was <strong>[1]</strong> in Kudus in <strong>[2]</strong>. I live in a small <strong>[3]</strong> called undaan, Kudus Regency. I'm <strong>[4]</strong> and have <strong>[5]</strong> children. I work at MTs NU Maslakul Falah. My <strong>[6]</strong> is reading.</p>

      <form id="form">
        <div class="grid">
          <div>
            <label for="b1">[1]</label>
            <textarea id="b1" placeholder="" aria-label="jawaban 1"></textarea>
          </div>
          <div>
            <label for="b2">[2]</label>
            <textarea id="b2" placeholder="" aria-label="jawaban 2"></textarea>
          </div>
          <div>
            <label for="b3">[3]</label>
            <textarea id="b3" placeholder="" aria-label="jawaban 3"></textarea>
          </div>
          <div>
            <label for="b4">[4]</label>
            <textarea id="b4" placeholder="" aria-label="jawaban 4"></textarea>
          </div>
          <div>
            <label for="b5">[5]</label>
            <textarea id="b5" placeholder="" aria-label="jawaban 5"></textarea>
          </div>
          <div>
            <label for="b6">[6]</label>
            <textarea id="b6" placeholder="" aria-label="jawaban 6"></textarea>
          </div>
        </div>

        <div class="controls">
          <button type="button" id="cek">Hasil</button>
          <button type="button" id="reset" class="secondary">Reset</button>
        </div>

        <div class="feedback" id="feedback" aria-live="polite"></div>
      </form>
    </div>

    <div style="font-size:13px;color:#043a57">Terima kasih.</div>
  </main>

  <script>
    const correct = ['born','1984','village','married','two','pasion'];
    const player = document.getElementById('player');
    const inputs = ['b1','b2','b3','b4','b5','b6'].map(id=>document.getElementById(id));
    const cek = document.getElementById('cek');
    const reset = document.getElementById('reset');
    const feedback = document.getElementById('feedback');

    let played = false;
    // tandai ketika audio diputar minimal sekali
    player.addEventListener('play', ()=>{ played = true; });

    function normalize(s){ return s.trim().toLowerCase(); }

    cek.addEventListener('click', ()=>{
      if(!played){
        feedback.textContent = 'Harap putar rekaman terlebih dahulu sebelum menjawab.';
        return;
      }

      const answers = inputs.map(inp => normalize(inp.value));
      let ok = true;
      for(let i=0;i<correct.length;i++){
        if(answers[i] !== correct[i]){ ok = false; break; }
      }

      if(ok){
        feedback.textContent = 'Hebat. Jawaban anda benar';
      } else {
        feedback.textContent = 'Maaf. Jawaban anda salah, ulangi lagi';
      }
    });

    reset.addEventListener('click', ()=>{
      inputs.forEach(i=> i.value = '');
      feedback.textContent = '';
      // reset played agar siswa harus putar lagi
      played = false;
      // jeda kecil lalu pause dan reset posisi audio
      try{ player.pause(); player.currentTime = 0; }catch(e){}
      inputs[0].focus();
    });

    // Pastikan textarea tampil bersih tanpa tulisan (placeholder kosong)
    inputs.forEach(i=>{ i.value = ''; });
  </script>
</body>
</html>